<!DOCTYPE html>
<html>   
    <head>   
      <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width" />   
    </head>   
    <body>   
        <h2><a id="applink1" href="FiveStar://test">Open scheme(mtcmtc) defined in iPhone with parameters </a></h2>   
        <h2><a id="applink2" href="unknown://nowhere">open unknown with fallback to appstore</a></h2>   
        <p><i>Only works on iPhone!</i></p>      
          
        <script type="text/javascript">   
            // To avoid the "protocol not supported" alert, fail must open another app.  
            var appstore = "itms://itunes.apple.com/us/app/facebook/id284882215?mt=8&uo=6";  
            function applink(fail){  
                return function(){  
                    var clickedAt = +new Date;  
                    // During tests on 3g/3gs this timeout fires immediately if less than 500ms.  
                    setTimeout(function(){  
                              // To avoid failing on return to MobileSafari, ensure freshness!  
                              if (+new Date - clickedAt < 2000){  
                              window.location = fail;  
                              }  
                              }, 80);      
                };  
            }  
            document.getElementById("applink1").onclick = applink(appstore);  
            document.getElementById("applink2").onclick = applink(appstore);  
            </script>   
    </body>   
</html> 